<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{common/layouts/main_layout}"
	  layout:fragment="content">
	  
<!-- CSRF 토큰 메타는 필요 없음 → form input에 바로 넣음 -->

<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<style>
		.card-header {
			background-color: #2C3E50;
		}
		.menu-container {
			position: relative;
			display: inline-block;
		}
		.menu-toggle {
			cursor: pointer;
			font-size: 18px;
		}
		.dropdown-menu {
			display: none;
			position: absolute;
			right: 0;
			top: 100%;
			background-color: white;
			border: 1px solid #ccc;
			list-style: none;
			padding: 5px 0;
			margin: 0;
			z-index: 1000;
			box-shadow: 0px 2px 6px rgba(0,0,0,0.1);
		}
		.dropdown-menu li {
			padding: 5px 15px;
			cursor: pointer;
		}
		.dropdown-menu li:hover {
			background-color: #f0f0f0;
		}
		.custom-btn {
		    background-color: rgba(44, 62, 80, 1);
		    color: white;
		    border: none;
		    padding: 8px 16px;
		    border-radius: 4px;
		    font-size: 14px;
		    font-weight: bold;
		    cursor: pointer;
		    transition: 0.3s;
		}
		.custom-btn:hover {
		    background-color: rgba(35, 50, 65, 1);
		}	
	</style>
</head>
<body>
	<div class="container my-4">
		<div class="card">
			<div class="card-header text-white">
				<h4 class="mb-0 companyName"></h4>
			</div>
			<div class="card-body">
				<table class="table">
					<tbody>
						<tr th:each="suber : ${suber}">
							<td th:text="${suber.moduleName}"></td>
							<td th:text="${suber.paymentPrice}"></td>
							<td th:text="${#dates.format(suber.paymentStartDate, 'yyyy-MM-dd')}"></td>
							<td th:text="${#dates.format(suber.paymentEndDate, 'yyyy-MM-dd')}"></td>
						</tr>
					</tbody>
				</table>
				<div class="d-flex justify-content-end mt-3">
					<button type="button" class="custom-btn btn-sm">
						<i class="bi bi-receipt payment"></i> 결제내역
					</button>
				</div>

			</div>
		</div>
	</div>


	<script th:inline="javascript">
		var suber = /*[[${suber}]]*/[];
		$('.companyName').html(suber[0].companyName);
		
		$.ajax({
		    type: "POST",
		    url: "/추가해야댐",
		    data: { suberNo: suber[0].suberNo },
		    success: function(response) {
		        console.log("요청 성공", response);
		    },
		    error: function(xhr, status, error) {
		        console.log("자식없음");
		    }
		});
	</script>
</body>
</html>
