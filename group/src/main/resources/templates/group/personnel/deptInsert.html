<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layouts/default_layout}"
      layout:fragment="content">

<head>
    <meta charset="UTF-8">
    <title>부서 관리</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.6.2/css/bootstrap.min.css">
</head>

<body>
<div class="container mt-4">
    <h2 class="text-center mb-4">부서 관리</h2>
    <div class="row">

        <!-- 왼쪽: 부서 등록 -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header font-weight-bold text-center">부서 등록</div>
                <div class="card-body">
                    <form th:action="@{/deptInsert}" th:object="${deptVO}" method="post" onsubmit="return confirmInsert()">
                        <input type="hidden" th:field="*{departmentNo}"/>
                        <input type="hidden" th:field="*{suberNo}"/>

                        <div class="form-group">
                            <label>부서명</label>
                            <input type="text" class="form-control" th:field="*{departmentName}" required>
                        </div>

                        <div class="form-group">
                            <label>상위 부서</label>
                            <select class="form-control" th:field="*{upperDepNo}">
                                <option value="0">최상위 부서</option>
                                <option th:each="dept : ${deptList}"
                                        th:value="${dept.departmentNo}"
                                        th:text="${dept.departmentName}">
                                </option>
                            </select>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-block">등록</button>
                            <button type="button" class="btn btn-danger btn-block" onclick="window.history.back()">뒤로</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- 오른쪽: 부서장 지정 (옵션) -->
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header font-weight-bold text-center">부서장 추가 (선택)</div>
                <div class="card-body">
                    <p class="text-muted">부서 등록 후, 부서장 지정은 수정화면에서 가능합니다.</p>
                    <ul class="list-group">
                        <li class="list-group-item" th:each="dept : ${deptList}">
                            <strong th:text="${dept.departmentName}"></strong>
                            <span th:if="${dept.employeeName != null}" th:text="' - 부서장: ' + ${dept.employeeName}" class="text-success ml-2"></span>
                            <span th:if="${dept.employeeName == null}" class="text-danger ml-2">(부서장 미지정)</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

<script th:inline="javascript">
    function confirmInsert() {
        alert("부서가 등록되었습니다.");
        return true;
    }
</script>
</body>
</html>
