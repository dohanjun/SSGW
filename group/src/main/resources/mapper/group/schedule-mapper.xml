<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.app.group.mapper.ScheduleMapper">
	<insert id="insertSchedule" parameterType="ScheduleVO">
		<selectKey keyProperty="scheduleId" resultType="Integer"
			order="BEFORE">
			SELECT NVL(MAX(schedule_id), 1) + 1
			FROM schedule 
		</selectKey>
        INSERT INTO schedule (
            SCHEDULE_ID, SCHEDULE_TITLE, SCHEDULE_CONTENT, 
            SCHEDULE_START, SCHEDULE_END, EMPLOYEE_NO, 
            DEPARTMENT_NO, SCHEDULE_DIVISION, SUBER_NO
        ) VALUES (
            #{scheduleId}, #{scheduleTitle}, #{scheduleContent}, 
            #{scheduleStart}, #{scheduleEnd}, #{employeeNo}, 
            #{departmentNo}, '개인', #{suberNo}
        )
    </insert>
    <select id="getScheduleList" resultType="ScheduleVO" parameterType="ScheduleVO">
        SELECT  SCHEDULE_ID
			    ,SCHEDULE_TITLE
				,SCHEDULE_CONTENT
				,SCHEDULE_START
				,SCHEDULE_END
				,EMPLOYEE_NO
				,DEPARTMENT_NO
				,SCHEDULE_DIVISION
				,REPEAT_CYCLE
				,SUBER_NO 
        FROM schedule
        WHERE SUBER_NO = #{suberNo}
          AND EMPLOYEE_NO = #{employeeNo}
    </select>
</mapper>